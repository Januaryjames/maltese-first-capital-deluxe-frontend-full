<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Client Login — Maltese First Capital</title>
  <link rel="icon" href="/assets/logo-crest.png">
  <link rel="stylesheet" href="/styles.css" />
  <style>
    :root { --bg:#0b0f16; --text:#0b0f16; --card:#ffffff; --muted:#6b7280; --gold:#d4af37; }
    html,body{background:#0b0f16;margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif}
    .wrap{max-width:420px;margin:0 auto;padding:24px}
    .nav{position:sticky;top:0;background:#fff;border-bottom:1px solid #e5e7eb}
    .nav-inner{max-width:1160px;margin:0 auto;padding:14px 16px;display:flex;align-items:center;gap:10px}
    .brand{display:flex;align-items:center;gap:10px;color:#0b0f16;text-decoration:none}
    .brand img{width:44px;height:44px;border-radius:10px;object-fit:contain;background:#0d131b}
    .brand b{letter-spacing:.3px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:20px;margin-top:24px;color:#0b0f16}
    label{display:block;font-size:.95rem;margin:10px 0 6px;color:#111827}
    input[type="email"],input[type="password"]{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:12px;outline:none}
    .row{display:flex;align-items:center;gap:8px;margin-top:8px}
    .btn{display:inline-flex;justify-content:center;align-items:center;gap:8px;width:100%;padding:12px;border-radius:12px;border:1px solid #b38f2e;background:linear-gradient(180deg,#d4af37,#b4912b);color:#111;font-weight:700;margin-top:12px;cursor:pointer}
    .muted{color:#6b7280;font-size:.9rem}
    .link{color:#0b66ff;text-decoration:none}
    .err{background:#fff1f2;border:1px solid #fecdd3;color:#7f1d1d;padding:10px;border-radius:12px;margin-bottom:12px;display:none}
  </style>
</head>
<body>
  <div class="nav">
    <div class="nav-inner">
      <a class="brand" href="/index.html"><img src="/assets/logo-crest.png" alt=""><b>Maltese First Capital</b></a>
    </div>
  </div>

  <div class="wrap">
    <section class="card">
      <h2 style="margin:0 0 8px">Client Login</h2>
      <p class="muted" style="margin:0 0 12px">Enter your email and password to access your account.</p>

      <div id="errBox" class="err"></div>

      <label>Email</label>
      <input id="email" type="email" placeholder="you@company.com" autocomplete="username" required>

      <label>Password</label>
      <input id="password" type="password" placeholder="••••••••" autocomplete="current-password" required>

      <div class="row">
        <input id="showPwd" type="checkbox" aria-label="Show password">
        <span class="muted">Show password</span>
      </div>

      <button id="loginBtn" class="btn" type="button">Sign in</button>

      <p class="muted" style="margin-top:12px">
        Forgot or want to change it? <a class="link" href="/client-password.html">Change password</a>
      </p>
    </section>
  </div>

  <!-- Shared client store -->
  <script src="/scripts/mock-store.js?v=1"></script>

  <!-- Page logic -->
  <script>
    (()=>{
      const $ = s => document.querySelector(s);
      const err = msg => { const b=$('#errBox'); if(!b) return; b.textContent=msg||''; b.style.display=msg?'block':'none'; };

      $('#showPwd').addEventListener('change', (e)=>{
        const f = $('#password'); if(!f) return;
        f.type = e.target.checked ? 'text' : 'password';
      });

      $('#loginBtn').addEventListener('click', ()=>{
        err('');
        const email = ($('#email').value || '').trim().toLowerCase();
        const pass  = $('#password').value || '';

        const store = window.MFC_MOCK || {};
        const user  = store.USERS?.[email];

        if (!user) return err('No account found for that email.');
        if (!store.ALLOW_ANY_PASSWORD && user.password !== pass) return err('Incorrect password.');

        const exp = Date.now() + ((store.SESSION_HOURS||24) * 3600 * 1000);
        localStorage.mfc_token = JSON.stringify({ email, exp });

        location.href = '/client-dashboard.html';
      });
    })();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Client Login — Maltese First Capital</title>
  <link rel="icon" href="/assets/logo-crest.png" />
  <style>
    :root{--bg:#0b0f16;--card:#101722;--text:#e9eef8;--muted:#9eb0c7;--gold:#d4af37;--gold-2:#b99623}
    html,body{background:var(--bg);color:var(--text);margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif}
    .wrap{max-width:920px;margin:0 auto;padding:28px 18px}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:28px}
    .brand img{width:36px;height:36px;border-radius:8px;background:#0d131b;object-fit:contain}
    .brand b{font-weight:700;letter-spacing:.3px}
    .card{background:var(--card);border:1px solid rgba(212,175,55,.18);border-radius:16px;padding:24px;max-width:520px}
    h1{margin:0 0 6px 0;font-size:24px}
    .muted{color:var(--muted);font-size:14px;margin-bottom:16px}
    label{display:block;font-size:13px;margin:14px 0 6px;color:var(--muted)}
    input{width:100%;background:#0d131b;color:var(--text);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px 14px;font-size:15px}
    button{width:100%;margin-top:18px;background:linear-gradient(180deg,var(--gold),var(--gold-2));color:#1a1405;border:0;border-radius:12px;padding:12px 14px;font-weight:700;cursor:pointer}
    .msg{margin-top:12px;font-size:14px}
    .err{color:#ff9d9d}
    .ok{color:#9bf3b3}
    .navtop{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .crumb{color:var(--muted);font-size:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="navtop">
      <div class="brand"><img src="/assets/logo-crest.png" alt=""><b>Maltese First Capital</b></div>
      <div class="crumb">Client Area</div>
    </div>

    <div class="card">
      <h1>Client Login</h1>
      <div class="muted">Sign in to view your accounts and recent transactions.</div>

      <form id="loginForm" autocomplete="on">
        <label for="email">Email</label>
        <input id="email" type="email" required placeholder="you@company.com" />

        <label for="password">Password</label>
        <input id="password" type="password" required placeholder="••••••••" />

        <button type="submit" id="loginBtn">Sign in</button>
        <div class="msg" id="msg"></div>
      </form>
    </div>
  </div>

  <script src="/scripts/config.mock.js"></script>
  <script src="/scripts/mock-auth.js"></script>
  <script>
    (()=>{
      const $ = s => document.querySelector(s);
      const form = $('#loginForm'), btn = $('#loginBtn'), msg = $('#msg');

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        msg.textContent = ''; msg.className = 'msg';
        btn.disabled = true; btn.textContent = 'Signing in…';
        const email = $('#email').value.trim();
        const pass  = $('#password').value;

        const r = await window.MFC_AUTH.login(email, pass);
        if (!r.ok) {
          msg.textContent = r.error || 'Login failed';
          msg.className = 'msg err';
          btn.disabled = false; btn.textContent = 'Sign in';
          return;
        }
        msg.textContent = 'Signed in.';
        msg.className = 'msg ok';
        const p = new URLSearchParams(window.location.search).get('next') || '/client-dashboard.html';
        window.location.href = p;
      });
    })();
  </script>
</body>
</html>

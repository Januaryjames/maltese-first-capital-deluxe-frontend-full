<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Client Dashboard — Maltese First Capital</title>
  <!-- keep your existing CSS includes here (no visual changes) -->
</head>
<body>
  <!-- If you already have a site header/nav, keep it. -->
  <main style="max-width:1000px;margin:32px auto;padding:0 16px;">
    <!-- Success banner (shown after account-open redirect with ?submitted=ID) -->
    <div id="submittedBanner" class="card" style="display:none;margin-bottom:16px;padding:12px;border-left:4px solid #4caf50;">
      <strong>Application received.</strong>
      <span id="submittedRef" class="muted" style="margin-left:6px;"></span>
    </div>

    <section class="card" style="padding:18px;border-radius:14px;">
      <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <h2 style="margin:0;">Accounts
          <small id="clientName" class="muted" style="font-weight:400;opacity:.75;margin-left:6px;"></small>
        </h2>
        <button type="button" onclick="MFC.logout()">Log out</button>
      </header>

      <div id="accountsList">
        <div class="muted">Loading…</div>
      </div>
    </section>
  </main>

  <!-- Config + wiring (order matters) -->
  <script src="/scripts/config.js"></script>
  <script src="/scripts/auth-wire.js" defer></script>
  <script src="/scripts/client-dashboard-wire.js" defer></script>

  <!-- Tiny helper to show the post-submission banner if present -->
  <script>
    (function(){
      const id = new URLSearchParams(location.search).get('submitted');
      if (!id) return;
      const banner = document.getElementById('submittedBanner');
      const ref    = document.getElementById('submittedRef');
      if (banner) {
        banner.style.display = 'block';
        if (ref) ref.textContent = 'Reference: ' + id;
        // clean URL after showing
        const u = new URL(location.href);
        u.searchParams.delete('submitted');
        history.replaceState({}, '', u.toString());
      }
    })();
  </script>
</body>
</html>
